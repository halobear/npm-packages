(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{114:function(t,e,n){"use strict";function a(t){t.preventDefault()}var i={name:"loading",data:function(){return{visible:!1}},methods:{show:function(){"undefined"!=typeof window&&(this.visible=!0,document.body.addEventListener("touchmove",a))},hide:function(){"undefined"!=typeof window&&(this.visible=!1,document.body.removeEventListener("touchmove",a))}}},r=(n(130),n(1)),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{staticClass:"loading-container-monitor"},[n("div",{staticClass:"loading fadeIn animated"},[n("div",{staticClass:"spinner spinner-ios"},[n("svg",{attrs:{viewBox:"0 0 64 64"}},[n("g",{attrs:{"stroke-width":"4","stroke-linecap":"round"}},[n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"}})]),t._v(" "),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"}})])])])])])]):t._e()}),[],!1,null,"6fceb054",null).exports,s=n(131),c=n(132),u=n(0),l=function(){function t(e){Object(s.a)(this,t),this.Component=u.default.extend(e),this.instance=""}return Object(c.a)(t,[{key:"show",value:function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];"undefined"!=typeof window&&(this.instance||(this.instance=new this.Component({el:document.createElement("div")}),document.body.appendChild(this.instance.$el)),u.default.nextTick((function(){var e=t.instance;e&&(e.visible=!0,e.show&&e.show.apply(e,n))})))}},{key:"hide",value:function(){var t=this.instance;t&&(this.instance.visible=!1,t.hide&&t.hide())}}]),t}(),d=new l(o);function p(t){t.preventDefault()}var f,m,v={name:"toast",data:function(){return{visible:!1,tips:""}},methods:{show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"undefined"!=typeof window&&t&&(this.tips=t,this.visible=!0,document.body.addEventListener("touchmove",p))},hide:function(){"undefined"!=typeof window&&(this.visible=!1,document.body.removeEventListener("touchmove",p))}}},h=(n(135),Object(r.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e("div",{staticClass:"loading-container-monitor"},[e("div",{staticClass:"loading animated fadeIn"},[e("span",{staticClass:"tips",domProps:{innerHTML:this._s(this.tips)}})])]):this._e()}),[],!1,null,"523181bc",null).exports);var g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;f||(f=new l(h)),t&&console.log("Toast: ",t),f.show(t),m&&clearTimeout(m),m=setTimeout((function(){f.hide()}),e)};n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return g}))},130:function(t,e,n){"use strict";var a=n(66);n.n(a).a},135:function(t,e,n){"use strict";var a=n(67);n.n(a).a},192:function(t,e,n){},193:function(t,e,n){},194:function(t,e,n){},388:function(t,e,n){"use strict";var a=n(192);n.n(a).a},389:function(t,e,n){"use strict";var a=n(193);n.n(a).a},390:function(t,e,n){"use strict";var a=n(194);n.n(a).a},393:function(t,e,n){"use strict";n.r(e);var a=n(197),i=(n(100),n(113)),r=(n(65),n(357)),o=n.n(r),s=(n(359),n(360),n(361),n(103),n(365)),c=n(196),u=(n(366),n(368),n(369),n(75),n(101),n(370),n(106),n(371)),l=n.n(u),d=n(114),p=function(t){var e=t.file,n=t.width,a=t.height;return!n&&!a||!!e&&(!/^image\/[jpeg|png|jpg|gif|svg|ico]/gi.test(e.type)||new Promise((function(t){var i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){return n&&n<this.width?t(!1):a&&a<this.height?t(!1):void t(!0)},i.onerror=function(){t(!1)}})))};function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(regeneratorRuntime.mark((function t(e){var n,a,i,r,o,s,u,d,p,f,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.action,a=void 0===n?"https://upload.qiniup.com":n,i=e.name,r=e.file,o=e.formData,s=void 0===o?{}:o,u=e.onProgress,d=e.needMD5,p=void 0===d||d,i&&p&&(s.key=i),f=new FormData,Object.entries(s).forEach((function(t){var e=Object(c.a)(t,2),n=e[0],a=e[1];f.append(n,a)})),f.append("file",r),t.next=7,l.a.upload({url:a,data:f,onProgress:u});case 7:return v=t.sent,t.abrupt("return",m({},v,{url:"".concat(v.base_url).concat(v.path,"-300x300")}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var g,b=Object(i.a)(regeneratorRuntime.mark((function t(){var e,n,a,r,o,s,c,u,f,m,h,g,b,y,w,k,_,C,O,j,x,Z,V=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=V.length>0&&void 0!==V[0]?V[0]:{},n=e.action,a=e.formData,r=void 0===a?{}:a,o=e.size,s=void 0===o?20:o,c=e.limit,u=void 0===c?1:c,f=e.width,m=e.height,h=e.needMD5,g=void 0===h||h,b=e.accept,y=void 0===b?"image/*":b,w=e.fetchToken,k=void 0===w?function(){}:w,_=e.onProgress,t.next=3,l.a.getFiles({multiple:u>1,needMD5:g,accept:y});case 3:return C=t.sent,t.next=6,k();case 6:if(r.token=t.sent,(O=C.filter((function(t){return t.file.size/1024/1024<=s}))).length!==C.length&&(j="".concat(C.length-O.length,"个文件大小超出").concat(s,"M"),Object(d.b)(j)),!f&&!m){t.next=16;break}return x=O,t.next=13,Promise.all(x.map(function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({file:e.file,width:f,height:m});case 2:return n=t.sent,t.abrupt("return",n?e:void 0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 13:O=(O=t.sent).filter((function(t){return t})),x.length!==O.length&&Object(d.b)("尺寸限制：宽 ".concat(f,", 高 ").concat(m));case 16:return t.next=18,Promise.all(O.slice(0,u).map((function(t){var e=t.name,a=t.file;return v({action:n,name:e,file:a,formData:r,onProgress:_,needMD5:g})})));case 18:return Z=t.sent,t.abrupt("return",Z);case 20:case"end":return t.stop()}}),t)}))),y=(n(143),n(377)),w=n.n(y),k={props:{data:{type:Object,default:function(){return{}}},accept:{type:String}},computed:{isImage:function(){return"image/*"===this.accept}},methods:{open:function(t){window.open(t)},handleClick:function(){this.$emit("click",this.data)},preview:function(){var t=this.data.url,e=void 0===t?"":t;e&&w.a.preview(e.replace(/-300x300/,"-w750"))}}},_=(n(388),n(1)),C=Object(_.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"file-card":!t.isImage,"image-card":t.isImage},on:{click:t.handleClick}},[t.data.url&&t.isImage?n("img",{staticClass:"origin-img animated fadeIn",attrs:{src:t.data.url}}):t.isImage?t._e():n("p",{on:{click:function(e){return t.open(t.data.url)}}},[t._v(t._s(t.data.path||t.data.url))]),t._v(" "),n("div",{staticClass:"action-box"},[t.isImage?n("i",{staticClass:"iconfont icon-eye",on:{click:function(e){return e.stopPropagation(),t.preview(e)}}}):t._e(),t._v(" "),n("i",{staticClass:"iconfont icon-delete",on:{click:function(e){return t.$emit("remove")}}})])])}),[],!1,null,"a35359d8",null).exports,O={props:{progress:{type:Number,default:0}}},j=(n(389),Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-card",on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"icon-cloud-upload iconfont"}),t._v(" "),n("span",[t._v("点击上传")]),t._v(" "),t.progress&&100!==t.progress?n("div",{staticClass:"upload-progress",style:{width:t.progress+"%"}}):t._e()])}),[],!1,null,"1cfb6bc7",null).exports),x={components:{draggable:o.a,ImageCard:C,UploadCard:j},model:{prop:"value",event:"change"},props:{action:{type:String,default:"https://upload.qiniup.com"},value:{type:Array},params:{type:Object,default:function(){return{}}},fetchToken:{type:Function},limit:{type:Number,default:1},size:{type:Number,default:20},width:{type:Number,default:0},height:{type:Number,default:0},accept:{type:String,default:"image/*"},needMD5:{type:Boolean,default:!0}},data:function(){return{dataValue:this.value||[],progress:0}},watch:{value:{deep:!0,handler:function(t){this.dataValue=t}}},methods:{changeValue:function(t){this.dataValue=t,this.$emit("change",t)},onProgress:function(t){var e=t.loaded,n=t.total;this.progress=Math.floor(100*e/n)},remove:function(t){this.dataValue.splice(t,1),this.changeValue(this.dataValue)},upload:(g=Object(i.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b({formData:this.params,size:this.size,limit:this.limit-this.dataValue.length,needMD5:this.needMD5,fetchToken:this.fetchToken,onProgress:this.onProgress,width:this.width,height:this.height,accept:this.accept});case 2:e=t.sent,this.changeValue([].concat(Object(a.a)(this.dataValue),Object(a.a)(e)));case 4:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})}},Z=(n(390),Object(_.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("draggable",{staticClass:"vue-upload-container",class:{"file-upload-container":"image/*"!==t.accept},attrs:{draggable:".image-card",value:t.value},on:{input:t.changeValue}},[t._l(t.value,(function(e,a){return n("image-card",{key:a,attrs:{accept:t.accept,data:e},on:{remove:function(e){return t.remove(a)}}})})),t._v(" "),t.dataValue.length<t.limit?n("upload-card",{attrs:{progress:t.progress},on:{click:t.upload}}):t._e()],2)}),[],!1,null,null,null).exports);Z.install=function(t){t.component("vue-qrcode",Z)};var V={components:{Upload:Z},data:function(){return{value:[{url:"http://pic.kuan1.top/e12720a8cee945216bc5e516fcb36028.png"},{url:"http://pic.kuan1.top/0b5934b623f3c6f5377f221959d77982.gif"},{url:"http://pic.kuan1.top/38d54e7711a19ac1ca08f134934bdbf3.png"}],params:{test:1}}},methods:{testToken:function(){return"m_bQ6vCqK-1n_myddynLMQxg0rxw3YqRptv5D7_i:8Oba8VIRsUzpOY1EGZ1QsT7jMlE=:eyJzY29wZSI6ImNybXB1YiIsImRlYWRsaW5lIjoxNTc3OTQ4NDI5LCJzYXZlS2V5Ijoid2VkZGluZ1wvJChldGFnKSQoc3VmZml4KSIsImNhbGxiYWNrVXJsIjoiaHR0cHM6XC9cL2FwcC1kYXNoYm9hcmQud2VkZGluZ2VlLmNvbVwvYXBpXC9oYWxvLWRhc2hib2FyZFwvdjFcL3VwbG9hZFwvcWluaXUiLCJjYWxsYmFja0JvZHkiOiJrZXk9JChrZXkpJnc9JChpbWFnZUluZm8ud2lkdGgpJmg9JChpbWFnZUluZm8uaGVpZ2h0KSZmbmFtZT0kKGZuYW1lKSZmc2l6ZT0kKGZzaXplKSZtaW1lVHlwZT0kKG1pbWVUeXBlKSZmdHlwZT0ke3g6ZnR5cGV9Jm1vZHVsZT0ke3g6bW9kdWxlfSZoYWxsX21vZHVsZT0ke3g6aGFsbF9tb2R1bGV9JnR5cGU9Y3JtcHViIn0="}}},N=Object(_.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"test-container"},[n("h2",{staticClass:"title"},[t._v("@halobear/vue-upload")]),t._v(" "),n("upload",{attrs:{fetchToken:t.testToken,params:t.params,limit:5},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("p",{staticStyle:{"padding-top":"20px"}},[t._v(t._s(t.value))])],1)}),[],!1,null,null,null);e.default=N.exports},66:function(t,e,n){},67:function(t,e,n){}}]);