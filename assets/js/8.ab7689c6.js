(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{200:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},597:function(e,t,n){},598:function(e,t,n){"use strict";var i=n(200);n.n(i).a},609:function(e,t,n){"use strict";var i=n(206);n.n(i).a},610:function(e,t,n){"use strict";var i=n(207);n.n(i).a},668:function(e,t,n){"use strict";n.r(t);var i=n(352),o=n.n(i),r=n(408),s=n.n(r),a=(n(246),n(115)),l=n(116),c=function(){function e(t,n){Object(a.a)(this,e),this.currentTab=1,this.l=t,this.r=n,this.lScroll=this.lScroll.bind(this),this.rScroll=this.rScroll.bind(this),this.lOver=this.lOver.bind(this),this.rOver=this.rOver.bind(this),this.init()}return Object(l.a)(e,[{key:"init",value:function(){this.l.addEventListener("scroll",this.lScroll),this.r.addEventListener("scroll",this.rScroll),this.l.addEventListener("mouseover",this.lOver),this.r.addEventListener("mouseover",this.rOver)}},{key:"destroy",value:function(){this.l&&this.l.removeEventListener("scroll",this.lScroll),this.r&&this.r.removeEventListener("scroll",this.rScroll),this.l&&this.l.removeEventListener("mouseover",this.lOver),this.r&&this.r.removeEventListener("mouseover",this.rOver)}},{key:"lScroll",value:function(){1===this.currentTab&&(this.r.scrollTop=this.l.scrollTop*this.getScale())}},{key:"rScroll",value:function(){2===this.currentTab&&(this.l.scrollTop=this.r.scrollTop/this.getScale())}},{key:"lOver",value:function(){this.currentTab=1}},{key:"rOver",value:function(){this.currentTab=2}},{key:"getScale",value:function(){return(this.r.scrollHeight-this.r.offsetHeight)/(this.l.scrollHeight-this.l.offsetHeight)}}]),e}(),d=function(e){var t=document.createElement("textarea");t.setAttribute("readonly",""),t.value=e,t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var n,i=document.getSelection();i&&i.rangeCount>0&&(n=i.getRangeAt(0)),document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;var o=!1;try{o=document.execCommand("copy")}catch(e){}return document.body.removeChild(t),n&&i&&(i.removeAllRanges(),i.addRange(n)),o},h=(n(597),{props:{value:{type:String,default:""},sync:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{v:this.value,transfer:"",visible:!0}},watch:{value:function(){this.v=this.value,this.transferValue()}},mounted:function(){if(this.sync){var e=this.$refs,t=e.editor,n=e.preview;this.syncScroll=new c(t,n)}this.init(),this.transferValue()},beforeDestroy:function(){this.syncScroll&&this.syncScroll.destroy()},methods:{init:function(){this.md=new o.a({highlight:function(e,t){if(t&&s.a.getLanguage(t))try{return'<pre class="hljs"><code>'.concat(s.a.highlight(t,e,!0).value,"</code></pre>")}catch(e){console.error("highlight.js:",e)}return""}})},transferValue:function(){this.md&&(this.transfer=this.md.render(this.value))},change:function(e){var t=e.target.value;this.v=t,this.$emit("input",t)},copy:function(){d(this.transfer),this.$emit("copy",this.transfer),alert("复制HTML成功")}}}),u=(n(598),n(1)),f=Object(u.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"md-outer"},[n("div",{staticClass:"md-action"},[n("div",[n("span",{staticClass:"balloon",attrs:{"data-balloon":"切换预览"}},[n("i",{staticClass:"icon-eye iconfont",on:{click:function(t){e.visible=!e.visible}}})]),e._v(" "),n("span",{staticClass:"balloon",attrs:{"data-balloon":"复制html"}},[n("i",{staticClass:"icon-file-copy iconfont",on:{click:e.copy}})])]),e._v(" "),e.multiple?n("div",[n("span",{staticClass:"balloon",attrs:{"data-balloon":"切换编辑器"}},[n("i",{staticClass:"icon-file-markdown iconfont",on:{click:function(t){return e.$emit("update:type","word")}}})])]):e._e()]),e._v(" "),n("div",{staticClass:"md-frame"},[n("textarea",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"editor",staticClass:"editor",domProps:{value:e.value},on:{input:e.change}}),e._v(" "),n("div",{ref:"preview",staticClass:"preview md-body",domProps:{innerHTML:e._s(e.transfer)}})])])}),[],!1,null,"1774fbde",null).exports,p=n(153),m=(n(100),n(119)),g=(n(162),n(599),n(201),n(127),n(193),n(145),n(133),n(98),n(600),n(132),n(96),n(202),n(601),1),v=3,C=9,_=11,S=1,N="​",y=window,b=navigator.userAgent,T=/Android/.test(b),k=/iP(?:ad|hone|od)/.test(b),E=/Mac OS X/.test(b),x=/Windows NT/.test(b),L=/Gecko\//.test(b),O=/Trident\/[456]\./.test(b),B=!!y.opera,A=/Edge\//.test(b),R=!A&&/WebKit\//.test(b),D=/Trident\/[4567]\./.test(b),w=E?"meta-":"ctrl-",P=O||B,U=O||R,I=O,F="undefined"!=typeof MutationObserver,M="undefined"!=typeof WeakMap,H=/[^ \t\r\n]/,z=Array.prototype.indexOf;Object.create||(Object.create=function(e){var t=function(){};return t.prototype=e,new t});var W={1:1,2:2,3:4,8:128,9:256,11:1024},$=function(){return!0};function q(e,t,n){this.root=this.currentNode=e,this.nodeType=t,this.filter=n||$}q.prototype.nextNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,o=this.filter;;){for(e=t.firstChild;!e&&t&&t!==n;)(e=t.nextSibling)||(t=t.parentNode);if(!e)return null;if(W[e.nodeType]&i&&o(e))return this.currentNode=e,e;t=e}},q.prototype.previousNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,o=this.filter;;){if(t===n)return null;if(e=t.previousSibling)for(;t=e.lastChild;)e=t;else e=t.parentNode;if(!e)return null;if(W[e.nodeType]&i&&o(e))return this.currentNode=e,e;t=e}},q.prototype.previousPONode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,o=this.filter;;){for(e=t.lastChild;!e&&t&&t!==n;)(e=t.previousSibling)||(t=t.parentNode);if(!e)return null;if(W[e.nodeType]&i&&o(e))return this.currentNode=e,e;t=e}};var K=/^(?:#text|A(?:BBR|CRONYM)?|B(?:R|D[IO])?|C(?:ITE|ODE)|D(?:ATA|EL|FN)|EM|FONT|HR|I(?:FRAME|MG|NPUT|NS)?|KBD|Q|R(?:P|T|UBY)|S(?:AMP|MALL|PAN|TR(?:IKE|ONG)|U[BP])?|TIME|U|VAR|WBR)$/,j={BR:1,HR:1,IFRAME:1,IMG:1,INPUT:1};var G=0,V=1,Z=2,Q=3,Y=M?new WeakMap:null;function X(e){return e.nodeType===g&&!!j[e.nodeName]}function J(e){switch(e.nodeType){case v:return V;case g:case _:if(M&&Y.has(e))return Y.get(e);break;default:return G}var t;return t=function(e,t){for(var n=e.length;n--;)if(!t(e[n]))return!1;return!0}(e.childNodes,ee)?K.test(e.nodeName)?V:Z:Q,M&&Y.set(e,t),t}function ee(e){return J(e)===V}function te(e){return J(e)===Z}function ne(e){return J(e)===Q}function ie(e,t){var n=new q(t,S,te);return n.currentNode=e,n}function oe(e,t){return(e=ie(e,t).previousNode())!==t?e:null}function re(e,t){return(e=ie(e,t).nextNode())!==t?e:null}function se(e){return!e.textContent&&!e.querySelector("IMG")}function ae(e,t){return!X(e)&&e.nodeType===t.nodeType&&e.nodeName===t.nodeName&&"A"!==e.nodeName&&e.className===t.className&&(!e.style&&!t.style||e.style.cssText===t.style.cssText)}function le(e,t,n){if(e.nodeName!==t)return!1;for(var i in n)if(e.getAttribute(i)!==n[i])return!1;return!0}function ce(e,t,n,i){for(;e&&e!==t;){if(le(e,n,i))return e;e=e.parentNode}return null}function de(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function he(e){var t=e.nodeType;return t===g||t===_?e.childNodes.length:e.length||0}function ue(e){var t=e.parentNode;return t&&t.removeChild(e),e}function fe(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function pe(e){for(var t=e.ownerDocument.createDocumentFragment(),n=e.childNodes,i=n?n.length:0;i--;)t.appendChild(e.firstChild);return t}function me(e,t,n,i){var o,r,s,a,l=e.createElement(t);if(n instanceof Array&&(i=n,n=null),n)for(o in n)void 0!==(r=n[o])&&l.setAttribute(o,r);if(i)for(s=0,a=i.length;s<a;s+=1)l.appendChild(i[s]);return l}function ge(e,t){var n,i,o=t.__squire__,r=e.ownerDocument,s=e;if(e===t&&((i=e.firstChild)&&"BR"!==i.nodeName||(n=o.createDefaultBlock(),i?e.replaceChild(n,i):e.appendChild(n),e=n,n=null)),e.nodeType===v)return s;if(ee(e)){for(i=e.firstChild;U&&i&&i.nodeType===v&&!i.data;)e.removeChild(i),i=e.firstChild;i||(U?(n=r.createTextNode(N),o._didAddZWS()):n=r.createTextNode(""))}else if(P){for(;e.nodeType!==v&&!X(e);){if(!(i=e.firstChild)){n=r.createTextNode("");break}e=i}e.nodeType===v?/^ +$/.test(e.data)&&(e.data=""):X(e)&&e.parentNode.insertBefore(r.createTextNode(""),e)}else if(!e.querySelector("BR"))for(n=me(r,"BR");(i=e.lastElementChild)&&!ee(i);)e=i;if(n)try{e.appendChild(n)}catch(t){o.didError({name:"Squire: fixCursor – "+t,message:"Parent: "+e.nodeName+"/"+e.innerHTML+" appendChild: "+n.nodeName})}return s}function ve(e,t){var n,i,o,r,s=e.childNodes,a=e.ownerDocument,l=null;for(n=0,i=s.length;n<i;n+=1)!(r="BR"===(o=s[n]).nodeName)&&ee(o)?(l||(l=me(a,"div")),l.appendChild(o),n-=1,i-=1):(r||l)&&(l||(l=me(a,"div")),ge(l,t),r?e.replaceChild(l,o):(e.insertBefore(l,o),n+=1,i+=1),l=null),ne(o)&&ve(o,t);return l&&e.appendChild(ge(l,t)),e}function Ce(e,t,n,i){var o,r,s,a=e.nodeType;if(a===v&&e!==n)return Ce(e.parentNode,e.splitText(t),n,i);if(a===g){if("number"==typeof t&&(t=t<e.childNodes.length?e.childNodes[t]:null),e===n)return t;for(o=e.parentNode,r=e.cloneNode(!1);t;)s=t.nextSibling,r.appendChild(t),t=s;return"OL"===e.nodeName&&ce(e,i,"BLOCKQUOTE")&&(r.start=(+e.start||1)+e.childNodes.length-1),ge(e,i),ge(r,i),(s=e.nextSibling)?o.insertBefore(r,s):o.appendChild(r),Ce(o,r,n,i)}return t}function _e(e,t){if(e.nodeType===v&&(e=e.parentNode),e.nodeType===g){var n={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};!function e(t,n){for(var i,o,r,s=t.childNodes,a=s.length,l=[];a--;)if(i=s[a],o=a&&s[a-1],a&&ee(i)&&ae(i,o)&&!j[i.nodeName])n.startContainer===i&&(n.startContainer=o,n.startOffset+=he(o)),n.endContainer===i&&(n.endContainer=o,n.endOffset+=he(o)),n.startContainer===t&&(n.startOffset>a?n.startOffset-=1:n.startOffset===a&&(n.startContainer=o,n.startOffset=he(o))),n.endContainer===t&&(n.endOffset>a?n.endOffset-=1:n.endOffset===a&&(n.endContainer=o,n.endOffset=he(o))),ue(i),i.nodeType===v?o.appendData(i.data):l.push(pe(i));else if(i.nodeType===g){for(r=l.length;r--;)i.appendChild(l.pop());e(i,n)}}(e,n),t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset)}}function Se(e,t,n,i){for(var o,r,s,a=t;(o=a.parentNode)&&o!==i&&o.nodeType===g&&1===o.childNodes.length;)a=o;ue(a),s=e.childNodes.length,(r=e.lastChild)&&"BR"===r.nodeName&&(e.removeChild(r),s-=1),e.appendChild(pe(t)),n.setStart(e,s),n.collapse(!0),_e(e,n),B&&(r=e.lastChild)&&"BR"===r.nodeName&&e.removeChild(r)}function Ne(e,t){var n,i,o=e.previousSibling,r=e.firstChild,s=e.ownerDocument,a="LI"===e.nodeName;if(!a||r&&/^[OU]L$/.test(r.nodeName))if(o&&ae(o,e)){if(!ne(o)){if(!a)return;(i=me(s,"DIV")).appendChild(pe(o)),o.appendChild(i)}ue(e),n=!ne(e),o.appendChild(pe(e)),n&&ve(o,t),r&&Ne(r,t)}else a&&(o=me(s,"DIV"),e.insertBefore(o,r),ge(o,t))}var ye=function(e,t){for(var n=e.childNodes;t&&e.nodeType===g;)t=(n=(e=n[t-1]).childNodes).length;return e},be=function(e,t){if(e.nodeType===g){var n=e.childNodes;if(t<n.length)e=n[t];else{for(;e&&!e.nextSibling;)e=e.parentNode;e&&(e=e.nextSibling)}}return e},Te=function(e,t){var n,i,o,r,s=e.startContainer,a=e.startOffset,l=e.endContainer,c=e.endOffset;s.nodeType===v?(i=(n=s.parentNode).childNodes,a===s.length?(a=z.call(i,s)+1,e.collapsed&&(l=n,c=a)):(a&&(r=s.splitText(a),l===s?(c-=a,l=r):l===n&&(c+=1),s=r),a=z.call(i,s)),s=n):i=s.childNodes,a===(o=i.length)?s.appendChild(t):s.insertBefore(t,i[a]),s===l&&(c+=i.length-o),e.setStart(s,a),e.setEnd(l,c)},ke=function(e,t,n){var i=e.startContainer,o=e.startOffset,r=e.endContainer,s=e.endOffset;t||(t=e.commonAncestorContainer),t.nodeType===v&&(t=t.parentNode);for(var a,l,c,d,h,u=Ce(r,s,t,n),f=Ce(i,o,t,n),p=t.ownerDocument.createDocumentFragment();f!==u;)a=f.nextSibling,p.appendChild(f),f=a;return i=t,o=u?z.call(t.childNodes,u):t.childNodes.length,(l=(c=t.childNodes[o])&&c.previousSibling)&&l.nodeType===v&&c.nodeType===v&&(i=l,o=l.length,d=l.data,h=c.data," "===d.charAt(d.length-1)&&" "===h.charAt(0)&&(h=" "+h.slice(1)),l.appendData(h),ue(c)),e.setStart(i,o),e.collapse(!0),ge(t,n),p},Ee=function(e,t){var n,i,o=Ae(e,t),r=Re(e,t),s=o!==r;return Oe(e),Be(e,o,r,t),n=ke(e,null,t),Oe(e),s&&(r=Re(e,t),o&&r&&o!==r&&Se(o,r,e,t)),o&&ge(o,t),(i=t.firstChild)&&"BR"!==i.nodeName?e.collapse(!0):(ge(t,t),e.selectNodeContents(t.firstChild)),n},xe=function(e,t,n){var i,o,r,s,a,l,c,d,h,u,f,p=t.firstChild&&ee(t.firstChild);for(ve(t,n),i=t;i=re(i,n);)ge(i,n);if(e.collapsed||Ee(e,n),Oe(e),e.collapse(!1),s=ce(e.endContainer,n,"BLOCKQUOTE")||n,o=Ae(e,n),d=re(t,t),c=!p&&!!o&&se(o),o&&d&&!c&&!ce(d,t,"PRE")&&!ce(d,t,"TABLE")){if(Be(e,o,o,n),e.collapse(!0),a=e.endContainer,l=e.endOffset,tt(o,n,!1),ee(a)&&(a=(h=Ce(a,l,oe(a,n),n)).parentNode,l=z.call(a.childNodes,h)),l!==he(a))for(r=n.ownerDocument.createDocumentFragment();i=a.childNodes[l];)r.appendChild(i);Se(a,d,e,n),l=z.call(a.parentNode.childNodes,a)+1,a=a.parentNode,e.setEnd(a,l)}he(t)&&(c&&(e.setEndBefore(o),e.collapse(!1),ue(o)),Be(e,s,s,n),u=(h=Ce(e.endContainer,e.endOffset,s,n))?h.previousSibling:s.lastChild,s.insertBefore(t,h),h?e.setEndBefore(h):e.setEnd(s,he(s)),o=Re(e,n),Oe(e),a=e.endContainer,l=e.endOffset,h&&ne(h)&&Ne(h,n),(h=u&&u.nextSibling)&&ne(h)&&Ne(h,n),e.setEnd(a,l)),r&&(Se(o,r,f=e.cloneRange(),n),e.setEnd(f.endContainer,f.endOffset)),Oe(e)},Le=function(e,t,n){var i=t.ownerDocument.createRange();if(i.selectNode(t),n){var o=e.compareBoundaryPoints(3,i)>-1,r=e.compareBoundaryPoints(1,i)<1;return!o&&!r}var s=e.compareBoundaryPoints(0,i)<1,a=e.compareBoundaryPoints(2,i)>-1;return s&&a},Oe=function(e){for(var t,n=e.startContainer,i=e.startOffset,o=e.endContainer,r=e.endOffset,s=!0;n.nodeType!==v&&(t=n.childNodes[i])&&!X(t);)n=t,i=0;if(r)for(;o.nodeType!==v;){if(!(t=o.childNodes[r-1])||X(t)){if(s&&t&&"BR"===t.nodeName){r-=1,s=!1;continue}break}r=he(o=t)}else for(;o.nodeType!==v&&(t=o.firstChild)&&!X(t);)o=t;e.collapsed?(e.setStart(o,r),e.setEnd(n,i)):(e.setStart(n,i),e.setEnd(o,r))},Be=function(e,t,n,i){var o,r=e.startContainer,s=e.startOffset,a=e.endContainer,l=e.endOffset,c=!0;for(t||(t=e.commonAncestorContainer),n||(n=t);!s&&r!==t&&r!==i;)o=r.parentNode,s=z.call(o.childNodes,r),r=o;for(;c&&a.nodeType!==v&&a.childNodes[l]&&"BR"===a.childNodes[l].nodeName&&(l+=1,c=!1),a!==n&&a!==i&&l===he(a);)o=a.parentNode,l=z.call(o.childNodes,a)+1,a=o;e.setStart(r,s),e.setEnd(a,l)},Ae=function(e,t){var n,i=e.startContainer;return(n=ee(i)?oe(i,t):i!==t&&te(i)?i:re(n=ye(i,e.startOffset),t))&&Le(e,n,!0)?n:null},Re=function(e,t){var n,i,o=e.endContainer;if(ee(o))n=oe(o,t);else if(o!==t&&te(o))n=o;else{if(!(n=be(o,e.endOffset))||!de(t,n))for(n=t;i=n.lastChild;)n=i;n=oe(n,t)}return n&&Le(e,n,!0)?n:null},De=new q(null,4|S,(function(e){return e.nodeType===v?H.test(e.data):"IMG"===e.nodeName})),we=function(e,t){var n,i=e.startContainer,o=e.startOffset;if(De.root=null,i.nodeType===v){if(o)return!1;n=i}else if((n=be(i,o))&&!de(t,n)&&(n=null),!n&&(n=ye(i,o)).nodeType===v&&n.length)return!1;return De.currentNode=n,De.root=Ae(e,t),!De.previousNode()},Pe=function(e,t){var n,i=e.endContainer,o=e.endOffset;if(De.root=null,i.nodeType===v){if((n=i.data.length)&&o<n)return!1;De.currentNode=i}else De.currentNode=ye(i,o);return De.root=Re(e,t),!De.nextNode()},Ue=function(e,t){var n,i=Ae(e,t),o=Re(e,t);i&&o&&(n=i.parentNode,e.setStart(n,z.call(n.childNodes,i)),n=o.parentNode,e.setEnd(n,z.call(n.childNodes,o)+1))},Ie={8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",37:"left",39:"right",46:"delete",219:"[",221:"]"},Fe=function(e){var t=e.keyCode,n=Ie[t],i="",o=this.getSelection();e.defaultPrevented||(n||(n=String.fromCharCode(t).toLowerCase(),/^[A-Za-z0-9]$/.test(n)||(n="")),B&&46===e.which&&(n="."),111<t&&t<124&&(n="f"+(t-111)),"backspace"!==n&&"delete"!==n&&(e.altKey&&(i+="alt-"),e.ctrlKey&&(i+="ctrl-"),e.metaKey&&(i+="meta-")),e.shiftKey&&(i+="shift-"),n=i+n,this._keyHandlers[n]?this._keyHandlers[n](this,e,o):o.collapsed||e.isComposing||e.ctrlKey||e.metaKey||1!==(e.key||n).length||(this.saveUndoState(o),Ee(o,this._root),this._ensureBottomLine(),this.setSelection(o),this._updatePath(o,!0)))},Me=function(e){return function(t,n){n.preventDefault(),t[e]()}},He=function(e,t){return t=t||null,function(n,i){i.preventDefault();var o=n.getSelection();n.hasFormat(e,null,o)?n.changeFormat(null,{tag:e},o):n.changeFormat({tag:e},t,o)}},ze=function(e,t){try{t||(t=e.getSelection());var n,i=t.startContainer;for(i.nodeType===v&&(i=i.parentNode),n=i;ee(n)&&(!n.textContent||n.textContent===N);)n=(i=n).parentNode;i!==n&&(t.setStart(n,z.call(n.childNodes,i)),t.collapse(!0),n.removeChild(i),te(n)||(n=oe(n,e._root)),ge(n,e._root),Oe(t)),i===e._root&&(i=i.firstChild)&&"BR"===i.nodeName&&ue(i),e._ensureBottomLine(),e.setSelection(t),e._updatePath(t,!0)}catch(t){e.didError(t)}},We=function(e,t,n){var i,o,r,s,a,l=e._root;if(e._recordUndoState(n),e._config.addLinks&&kt(n.startContainer,l,e),e._removeZWS(),e._getRangeAndRemoveBookmark(n),n.collapsed||Ee(n,l),(i=Ae(n,l))&&(o=ce(i,l,"PRE")))return Oe(n),r=n.startContainer,s=n.startOffset,r.nodeType!==v&&(r=e._doc.createTextNode(""),o.insertBefore(r,o.firstChild)),t||"\n"!==r.data.charAt(s-1)&&!we(n,l)||"\n"!==r.data.charAt(s)&&!Pe(n,l)?(r.insertData(s,"\n"),ge(o,l),r.length===s+1?n.setStartAfter(r):n.setStart(r,s+1)):(r.deleteData(s&&s-1,s?2:1),(r=(a=Ce(r,s&&s-1,l,l)).previousSibling).textContent||ue(r),r=e.createDefaultBlock(),a.parentNode.insertBefore(r,a),a.textContent||ue(a),n.setStart(r,0)),n.collapse(!0),e.setSelection(n),e._updatePath(n,!0),void e._docWasChanged();if(!i||t||/^T[HD]$/.test(i.nodeName))return(o=ce(n.endContainer,l,"A"))&&(o=o.parentNode,Be(n,o,o,l),n.collapse(!1)),Te(n,e.createElement("BR")),n.collapse(!1),e.setSelection(n),void e._updatePath(n,!0);if((o=ce(i,l,"LI"))&&(i=o),se(i)){if(ce(i,l,"UL")||ce(i,l,"OL"))return e.decreaseListLevel(n);if(ce(i,l,"BLOCKQUOTE"))return e.modifyBlocks(yt,n)}for(a=St(e,i,n.startContainer,n.startOffset),vt(i),Xe(i),ge(i,l);a.nodeType===g;){var c,d=a.firstChild;if("A"===a.nodeName&&(!a.textContent||a.textContent===N)){fe(a,d=e._doc.createTextNode("")),a=d;break}for(;d&&d.nodeType===v&&!d.data&&(c=d.nextSibling)&&"BR"!==c.nodeName;)ue(d),d=c;if(!d||"BR"===d.nodeName||d.nodeType===v&&!B)break;a=d}n=e.createRange(a,0),e.setSelection(n),e._updatePath(n,!0)},$e={enter:k?function(e,t,n){e._saveRangeToBookmark(n);var i=e._getHTML();e.addEventListener("keyup",(function t(){e.removeEventListener("keyup",t),e._setHTML(i),n=e._getRangeAndRemoveBookmark(),We(e,!1,n)}))}:function(e,t,n){t.preventDefault(),We(e,t.shiftKey,n)},"shift-enter":function(e,t,n){return e._keyHandlers.enter(e,t,n)},backspace:function(e,t,n){var i=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(we(n,i)){t.preventDefault();var o,r=Ae(n,i);if(!r)return;if(ve(r.parentNode,i),o=oe(r,i)){if(!o.isContentEditable)return void ue(o);for(Se(o,r,n,i),r=o.parentNode;r!==i&&!r.nextSibling;)r=r.parentNode;r!==i&&(r=r.nextSibling)&&Ne(r,i),e.setSelection(n)}else if(r){if(ce(r,i,"UL")||ce(r,i,"OL"))return e.decreaseListLevel(n);if(ce(r,i,"BLOCKQUOTE"))return e.modifyBlocks(Nt,n);e.setSelection(n),e._updatePath(n,!0)}}else e.setSelection(n),setTimeout((function(){ze(e)}),0);else t.preventDefault(),Ee(n,i),ze(e,n)},delete:function(e,t,n){var i,o,r,s,a,l,c=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(Pe(n,c)){if(t.preventDefault(),!(i=Ae(n,c)))return;if(ve(i.parentNode,c),o=re(i,c)){if(!o.isContentEditable)return void ue(o);for(Se(i,o,n,c),o=i.parentNode;o!==c&&!o.nextSibling;)o=o.parentNode;o!==c&&(o=o.nextSibling)&&Ne(o,c),e.setSelection(n),e._updatePath(n,!0)}}else{if(r=n.cloneRange(),Be(n,c,c,c),s=n.endContainer,a=n.endOffset,s.nodeType===g&&(l=s.childNodes[a])&&"IMG"===l.nodeName)return t.preventDefault(),ue(l),Oe(n),void ze(e,n);e.setSelection(r),setTimeout((function(){ze(e)}),0)}else t.preventDefault(),Ee(n,c),ze(e,n)},tab:function(e,t,n){var i,o,r=e._root;if(e._removeZWS(),n.collapsed&&we(n,r))for(i=Ae(n,r);o=i.parentNode;){if("UL"===o.nodeName||"OL"===o.nodeName){t.preventDefault(),e.increaseListLevel(n);break}i=o}},"shift-tab":function(e,t,n){var i,o=e._root;e._removeZWS(),n.collapsed&&we(n,o)&&(ce(i=n.startContainer,o,"UL")||ce(i,o,"OL"))&&(t.preventDefault(),e.decreaseListLevel(n))},space:function(e,t,n){var i,o=e._root;if(e._recordUndoState(n),e._config.addLinks&&kt(n.startContainer,o,e),e._getRangeAndRemoveBookmark(n),i=n.endContainer,n.collapsed&&n.endOffset===he(i))do{if("A"===i.nodeName){n.setStartAfter(i);break}}while(!i.nextSibling&&(i=i.parentNode)&&i!==o);n.collapsed||(Ee(n,o),e._ensureBottomLine(),e.setSelection(n),e._updatePath(n,!0)),e.setSelection(n)},left:function(e){e._removeZWS()},right:function(e){e._removeZWS()}};E&&L&&($e["meta-left"]=function(e,t){t.preventDefault();var n=ft(e);n&&n.modify&&n.modify("move","backward","lineboundary")},$e["meta-right"]=function(e,t){t.preventDefault();var n=ft(e);n&&n.modify&&n.modify("move","forward","lineboundary")}),E||($e.pageup=function(e){e.moveCursorToStart()},$e.pagedown=function(e){e.moveCursorToEnd()}),$e[w+"b"]=He("B"),$e[w+"i"]=He("I"),$e[w+"u"]=He("U"),$e[w+"shift-7"]=He("S"),$e[w+"shift-5"]=He("SUB",{tag:"SUP"}),$e[w+"shift-6"]=He("SUP",{tag:"SUB"}),$e[w+"shift-8"]=Me("makeUnorderedList"),$e[w+"shift-9"]=Me("makeOrderedList"),$e[w+"["]=Me("decreaseQuoteLevel"),$e[w+"]"]=Me("increaseQuoteLevel"),$e[w+"d"]=Me("toggleCode"),$e[w+"y"]=Me("redo"),$e[w+"z"]=Me("undo"),$e[w+"shift-z"]=Me("redo");var qe={1:10,2:13,3:16,4:18,5:24,6:32,7:48},Ke={fontWeight:{regexp:/^bold|^700/i,replace:function(e){return me(e,"B")}},fontStyle:{regexp:/^italic/i,replace:function(e){return me(e,"I")}},fontFamily:{regexp:H,replace:function(e,t,n){return me(e,"SPAN",{class:t.fontFamily,style:"font-family:"+n})}},fontSize:{regexp:H,replace:function(e,t,n){return me(e,"SPAN",{class:t.fontSize,style:"font-size:"+n})}},textDecoration:{regexp:/^underline/i,replace:function(e){return me(e,"U")}}},je=function(e){return function(t,n){var i,o,r,s=me(t.ownerDocument,e),a=t.attributes;for(i=0,o=a.length;i<o;i+=1)r=a[i],s.setAttribute(r.name,r.value);return n.replaceChild(s,t),s.appendChild(pe(t)),s}},Ge={SPAN:function(e,t,n){var i,o,r,s,a,l,c=e.style,d=e.ownerDocument;for(i in Ke)if(o=Ke[i],(r=c[i])&&o.regexp.test(r)){if((l=o.replace(d,n.classNames,r)).nodeName===e.nodeName&&l.className===e.className)continue;a||(a=l),s&&s.appendChild(l),s=l,e.style[i]=""}return a&&(s.appendChild(pe(e)),e.appendChild(a)),s||e},STRONG:je("B"),EM:je("I"),INS:je("U"),STRIKE:je("S"),FONT:function(e,t,n){var i,o,r,s,a,l=e.face,c=e.size,d=e.color,h=e.ownerDocument,u=n.classNames;return l&&(a=i=me(h,"SPAN",{class:u.fontFamily,style:"font-family:"+l}),s=i),c&&(o=me(h,"SPAN",{class:u.fontSize,style:"font-size:"+qe[c]+"px"}),a||(a=o),s&&s.appendChild(o),s=o),d&&/^#?([\dA-F]{3}){1,2}$/i.test(d)&&("#"!==d.charAt(0)&&(d="#"+d),r=me(h,"SPAN",{class:u.colour,style:"color:"+d}),a||(a=r),s&&s.appendChild(r),s=r),a||(a=s=me(h,"SPAN")),t.replaceChild(a,e),s.appendChild(pe(e)),s},TT:function(e,t,n){var i=me(e.ownerDocument,"SPAN",{class:n.classNames.fontFamily,style:'font-family:menlo,consolas,"courier new",monospace'});return t.replaceChild(i,e),i.appendChild(pe(e)),i}},Ve=/^(?:A(?:DDRESS|RTICLE|SIDE|UDIO)|BLOCKQUOTE|CAPTION|D(?:[DLT]|IV)|F(?:IGURE|IGCAPTION|OOTER)|H[1-6]|HEADER|L(?:ABEL|EGEND|I)|O(?:L|UTPUT)|P(?:RE)?|SECTION|T(?:ABLE|BODY|D|FOOT|H|HEAD|R)|COL(?:GROUP)?|UL)$/,Ze=/^(?:HEAD|META|STYLE)/,Qe=new q(null,4|S),Ye=function e(t,n,i){var o,r,s,a,l,c,d,h,u,f,p,m,C=t.childNodes;for(o=t;ee(o);)o=o.parentNode;for(Qe.root=o,r=0,s=C.length;r<s;r+=1)if(l=(a=C[r]).nodeName,c=a.nodeType,d=Ge[l],c===g){if(h=a.childNodes.length,d)a=d(a,t,n);else{if(Ze.test(l)){t.removeChild(a),r-=1,s-=1;continue}if(!Ve.test(l)&&!ee(a)){r-=1,s+=h-1,t.replaceChild(pe(a),a);continue}}h&&e(a,n,i||"PRE"===l)}else{if(c===v){if(p=a.data,u=!H.test(p.charAt(0)),f=!H.test(p.charAt(p.length-1)),i||!u&&!f)continue;if(u){for(Qe.currentNode=a;(m=Qe.previousPONode())&&!("IMG"===(l=m.nodeName)||"#text"===l&&H.test(m.data));)if(!ee(m)){m=null;break}p=p.replace(/^[ \t\r\n]+/g,m?" ":"")}if(f){for(Qe.currentNode=a;(m=Qe.nextNode())&&!("IMG"===l||"#text"===l&&H.test(m.data));)if(!ee(m)){m=null;break}p=p.replace(/[ \t\r\n]+$/g,m?" ":"")}if(p){a.data=p;continue}}t.removeChild(a),r-=1,s-=1}return t},Xe=function e(t){for(var n,i=t.childNodes,o=i.length;o--;)(n=i[o]).nodeType!==g||X(n)?n.nodeType!==v||n.data||t.removeChild(n):(e(n),ee(n)&&!n.firstChild&&t.removeChild(n))},Je=function(e){return e.nodeType===g?"BR"===e.nodeName:H.test(e.data)},et=function(e,t){for(var n,i=e.parentNode;ee(i);)i=i.parentNode;return(n=new q(i,4|S,Je)).currentNode=e,!!n.nextNode()||t&&!n.previousNode()},tt=function(e,t,n){var i,o,r,s=e.querySelectorAll("BR"),a=[],l=s.length;for(i=0;i<l;i+=1)a[i]=et(s[i],n);for(;l--;)(r=(o=s[l]).parentNode)&&(a[l]?ee(r)||ve(r,t):ue(o))},nt=function(e,t,n,i){var o,r,s=t.ownerDocument.body,a=i.willCutCopy;tt(t,n,!0),t.setAttribute("style","position:fixed;overflow:hidden;bottom:100%;right:100%;"),s.appendChild(t),o=t.innerHTML,r=t.innerText||t.textContent,a&&(o=a(o)),x&&(r=r.replace(/\r?\n/g,"\r\n")),e.setData("text/html",o),e.setData("text/plain",r),s.removeChild(t)},it=function(e){var t,n,i,o,r,s,a=e.clipboardData,l=this.getSelection(),c=this._root,d=this;if(l.collapsed)e.preventDefault();else{if(this.saveUndoState(l),!A&&a){for(n=(t=Ae(l,c))===Re(l,c)&&t||c,i=Ee(l,c),(o=l.commonAncestorContainer).nodeType===v&&(o=o.parentNode);o&&o!==n;)(r=o.cloneNode(!1)).appendChild(i),i=r,o=o.parentNode;(s=this.createElement("div")).appendChild(i),nt(a,s,c,this._config),e.preventDefault()}else setTimeout((function(){try{d._ensureBottomLine()}catch(e){d.didError(e)}}),0);this.setSelection(l)}},ot=function(e){var t,n,i,o,r,s,a=e.clipboardData,l=this.getSelection(),c=this._root;if(!A&&a){for(n=(t=Ae(l,c))===Re(l,c)&&t||c,l=l.cloneRange(),Oe(l),Be(l,n,n,c),i=l.cloneContents(),(o=l.commonAncestorContainer).nodeType===v&&(o=o.parentNode);o&&o!==n;)(r=o.cloneNode(!1)).appendChild(i),i=r,o=o.parentNode;(s=this.createElement("div")).appendChild(i),nt(a,s,c,this._config),e.preventDefault()}};function rt(e){this.isShiftDown=e.shiftKey}var st=function(e){var t,n,i,o,r,s=e.clipboardData,a=s&&s.items,l=this.isShiftDown,c=!1,d=!1,h=!1,u=null,f=null,p=this;if(a){for(t=a.length;t--;)"text/html"===(i=(n=a[t]).type)?f=n:"text/plain"===i||"text/uri-list"===i?u=n:"text/rtf"===i?d=!0:/^image\/.*/.test(i)&&(h=!0);if(h&&(!d||!f))return e.preventDefault(),this.fireEvent("dragover",{dataTransfer:s,preventDefault:function(){c=!0}}),void(c&&this.fireEvent("drop",{dataTransfer:s}));if(!A)return e.preventDefault(),void(!f||l&&u?u&&u.getAsString((function(e){p.insertPlainText(e,!0)})):f.getAsString((function(e){p.insertHTML(e,!0)})))}if(o=s&&s.types,!A&&o&&(z.call(o,"text/html")>-1||!L&&z.call(o,"text/plain")>-1&&z.call(o,"text/rtf")<0))return e.preventDefault(),void(!l&&(r=s.getData("text/html"))?this.insertHTML(r,!0):((r=s.getData("text/plain"))||(r=s.getData("text/uri-list")))&&this.insertPlainText(r,!0));this._awaitingPaste=!0;var m=this._doc.body,g=this.getSelection(),v=g.startContainer,C=g.startOffset,_=g.endContainer,S=g.endOffset,N=this.createElement("DIV",{contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"});m.appendChild(N),g.selectNodeContents(N),this.setSelection(g),setTimeout((function(){try{p._awaitingPaste=!1;for(var e,t,n="",i=N;N=i;)i=N.nextSibling,ue(N),(e=N.firstChild)&&e===N.lastChild&&"DIV"===e.nodeName&&(N=e),n+=N.innerHTML;t=p.createRange(v,C,_,S),p.setSelection(t),n&&p.insertHTML(n,!0)}catch(e){p.didError(e)}}),0)},at=function(e){for(var t=e.dataTransfer.types,n=t.length,i=!1,o=!1;n--;)switch(t[n]){case"text/plain":i=!0;break;case"text/html":o=!0;break;default:return}(o||i)&&this.saveUndoState()};function lt(e,t,n){var i,o;if(e||(e={}),t)for(i in t)!n&&i in e||(o=t[i],e[i]=o&&o.constructor===Object?lt(e[i],o,n):o);return e}function ct(e,t){e.nodeType===C&&(e=e.body);var n,i=e.ownerDocument,o=i.defaultView;this._win=o,this._doc=i,this._root=e,this._events={},this._isFocused=!1,this._lastSelection=null,I&&this.addEventListener("beforedeactivate",this.getSelection),this._hasZWS=!1,this._lastAnchorNode=null,this._lastFocusNode=null,this._path="",this._willUpdatePath=!1,"onselectionchange"in i?this.addEventListener("selectionchange",this._updatePathOnEvent):(this.addEventListener("keyup",this._updatePathOnEvent),this.addEventListener("mouseup",this._updatePathOnEvent)),this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0,this._isInUndoState=!1,this._ignoreChange=!1,this._ignoreAllChanges=!1,F?((n=new MutationObserver(this._docWasChanged.bind(this))).observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._mutation=n):this.addEventListener("keyup",this._keyUpDetectChange),this._restoreSelection=!1,this.addEventListener("blur",pt),this.addEventListener("mousedown",mt),this.addEventListener("touchstart",mt),this.addEventListener("focus",gt),this._awaitingPaste=!1,this.addEventListener(O?"beforecut":"cut",it),this.addEventListener("copy",ot),this.addEventListener("keydown",rt),this.addEventListener("keyup",rt),this.addEventListener(O?"beforepaste":"paste",st),this.addEventListener("drop",at),this.addEventListener(B?"keypress":"keydown",Fe),this._keyHandlers=Object.create($e),this.setConfig(t),O&&(o.Text.prototype.splitText=function(e){var t=this.ownerDocument.createTextNode(this.data.slice(e)),n=this.nextSibling,i=this.parentNode,o=this.length-e;return n?i.insertBefore(t,n):i.appendChild(t),o&&this.deleteData(e,o),t}),e.setAttribute("contenteditable","true");try{i.execCommand("enableObjectResizing",!1,"false"),i.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}e.__squire__=this,this.setHTML("")}var dt=ct.prototype,ht=function(e,t,n){var i=n._doc,o=e?DOMPurify.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0}):null;return o?i.importNode(o,!0):i.createDocumentFragment()};dt.setConfig=function(e){return(e=lt({blockTag:"DIV",blockAttributes:null,tagAttributes:{blockquote:null,ul:null,ol:null,li:null,a:null},classNames:{colour:"colour",fontFamily:"font",fontSize:"size",highlight:"highlight"},leafNodeNames:j,undo:{documentSizeThreshold:-1,undoLimit:-1},isInsertedHTMLSanitized:!0,isSetHTMLSanitized:!0,sanitizeToDOMFragment:"undefined"!=typeof DOMPurify&&DOMPurify.isSupported?ht:null,willCutCopy:null,addLinks:!0},e,!0)).blockTag=e.blockTag.toUpperCase(),this._config=e,this},dt.createElement=function(e,t,n){return me(this._doc,e,t,n)},dt.createDefaultBlock=function(e){var t=this._config;return ge(this.createElement(t.blockTag,t.blockAttributes,e),this._root)},dt.didError=function(e){console.log(e)},dt.getDocument=function(){return this._doc},dt.getRoot=function(){return this._root},dt.modifyDocument=function(e){var t=this._mutation;t&&(t.takeRecords().length&&this._docWasChanged(),t.disconnect()),this._ignoreAllChanges=!0,e(),this._ignoreAllChanges=!1,t&&(t.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._ignoreChange=!1)};var ut={pathChange:1,select:1,input:1,undoStateChange:1};dt.fireEvent=function(e,t){var n,i,o,r=this._events[e];if(/^(?:focus|blur)/.test(e))if(n=this._root===this._doc.activeElement,"focus"===e){if(!n||this._isFocused)return this;this._isFocused=!0}else{if(n||!this._isFocused)return this;this._isFocused=!1}if(r)for(t||(t={}),t.type!==e&&(t.type=e),i=(r=r.slice()).length;i--;){o=r[i];try{o.handleEvent?o.handleEvent(t):o.call(this,t)}catch(t){t.details="Squire: fireEvent error. Event type: "+e,this.didError(t)}}return this},dt.destroy=function(){var e,t=this._events;for(e in t)this.removeEventListener(e);this._mutation&&this._mutation.disconnect(),delete this._root.__squire__,this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0},dt.handleEvent=function(e){this.fireEvent(e.type,e)},dt.addEventListener=function(e,t){var n=this._events[e],i=this._root;return t?(n||(n=this._events[e]=[],ut[e]||("selectionchange"===e&&(i=this._doc),i.addEventListener(e,this,!0))),n.push(t),this):(this.didError({name:"Squire: addEventListener with null or undefined fn",message:"Event type: "+e}),this)},dt.removeEventListener=function(e,t){var n,i=this._events[e],o=this._root;if(i){if(t)for(n=i.length;n--;)i[n]===t&&i.splice(n,1);else i.length=0;i.length||(delete this._events[e],ut[e]||("selectionchange"===e&&(o=this._doc),o.removeEventListener(e,this,!0)))}return this},dt.createRange=function(e,t,n,i){if(e instanceof this._win.Range)return e.cloneRange();var o=this._doc.createRange();return o.setStart(e,t),n?o.setEnd(n,i):o.setEnd(e,t),o},dt.getCursorPosition=function(e){if(!e&&!(e=this.getSelection())||!e.getBoundingClientRect)return null;var t,n,i=e.getBoundingClientRect();return i&&!i.top&&(this._ignoreChange=!0,(t=this._doc.createElement("SPAN")).textContent=N,Te(e,t),i=t.getBoundingClientRect(),(n=t.parentNode).removeChild(t),_e(n,e)),i},dt._moveCursorTo=function(e){var t=this._root,n=this.createRange(t,e?0:t.childNodes.length);return Oe(n),this.setSelection(n),this},dt.moveCursorToStart=function(){return this._moveCursorTo(!0)},dt.moveCursorToEnd=function(){return this._moveCursorTo(!1)};var ft=function(e){return e._win.getSelection()||null};function pt(){this._restoreSelection=!0}function mt(){this._restoreSelection=!1}function gt(){this._restoreSelection&&this.setSelection(this._lastSelection)}dt.setSelection=function(e){if(e)if(this._lastSelection=e,this._isFocused)if(T&&!this._restoreSelection)pt.call(this),this.blur(),this.focus();else{k&&this._win.focus();var t=ft(this);t&&(t.removeAllRanges(),t.addRange(e))}else pt.call(this);return this},dt.getSelection=function(){var e,t,n,i,o=ft(this),r=this._root;return this._isFocused&&o&&o.rangeCount&&(t=(e=o.getRangeAt(0).cloneRange()).startContainer,n=e.endContainer,t&&X(t)&&e.setStartBefore(t),n&&X(n)&&e.setEndBefore(n)),e&&de(r,e.commonAncestorContainer)?this._lastSelection=e:de((i=(e=this._lastSelection).commonAncestorContainer).ownerDocument,i)||(e=null),e||(e=this.createRange(r.firstChild,0)),e},dt.getSelectedText=function(){var e=this.getSelection();if(!e||e.collapsed)return"";var t,n=new q(e.commonAncestorContainer,4|S,(function(t){return Le(e,t,!0)})),i=e.startContainer,o=e.endContainer,r=n.currentNode=i,s="",a=!1;for(n.filter(r)||(r=n.nextNode());r;)r.nodeType===v?(t=r.data)&&/\S/.test(t)&&(r===o&&(t=t.slice(0,e.endOffset)),r===i&&(t=t.slice(e.startOffset)),s+=t,a=!0):("BR"===r.nodeName||a&&!ee(r))&&(s+="\n",a=!1),r=n.nextNode();return s},dt.getPath=function(){return this._path};var vt=function(e,t){for(var n,i,o,r=new q(e,4);i=r.nextNode();)for(;(o=i.data.indexOf(N))>-1&&(!t||i.parentNode!==t);){if(1===i.length){do{(n=i.parentNode).removeChild(i),i=n,r.currentNode=n}while(ee(i)&&!he(i));break}i.deleteData(o,1)}};dt._didAddZWS=function(){this._hasZWS=!0},dt._removeZWS=function(){this._hasZWS&&(vt(this._root),this._hasZWS=!1)},dt._updatePath=function(e,t){if(e){var n,i=e.startContainer,o=e.endContainer;(t||i!==this._lastAnchorNode||o!==this._lastFocusNode)&&(this._lastAnchorNode=i,this._lastFocusNode=o,n=i&&o?i===o?function e(t,n,i){var o,r,s,a,l,c="";return t&&t!==n&&(c=e(t.parentNode,n,i),t.nodeType===g&&(c+=(c?">":"")+t.nodeName,(o=t.id)&&(c+="#"+o),(r=t.className.trim())&&((s=r.split(/\s\s*/)).sort(),c+=".",c+=s.join(".")),(a=t.dir)&&(c+="[dir="+a+"]"),s&&(l=i.classNames,z.call(s,l.highlight)>-1&&(c+="[backgroundColor="+t.style.backgroundColor.replace(/ /g,"")+"]"),z.call(s,l.colour)>-1&&(c+="[color="+t.style.color.replace(/ /g,"")+"]"),z.call(s,l.fontFamily)>-1&&(c+="[fontFamily="+t.style.fontFamily.replace(/ /g,"")+"]"),z.call(s,l.fontSize)>-1&&(c+="[fontSize="+t.style.fontSize+"]")))),c}(o,this._root,this._config):"(selection)":"",this._path!==n&&(this._path=n,this.fireEvent("pathChange",{path:n}))),this.fireEvent(e.collapsed?"cursor":"select",{range:e})}},dt._updatePathOnEvent=function(){var e=this;e._isFocused&&!e._willUpdatePath&&(e._willUpdatePath=!0,setTimeout((function(){e._willUpdatePath=!1,e._updatePath(e.getSelection())}),0))},dt.focus=function(){return this._root.focus({preventScroll:!0}),D&&this.fireEvent("focus"),this},dt.blur=function(){return this._root.blur(),D&&this.fireEvent("blur"),this};var Ct="squire-selection-end";dt._saveRangeToBookmark=function(e){var t,n=this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),i=this.createElement("INPUT",{id:Ct,type:"hidden"});Te(e,n),e.collapse(!1),Te(e,i),2&n.compareDocumentPosition(i)&&(n.id=Ct,i.id="squire-selection-start",t=n,n=i,i=t),e.setStartAfter(n),e.setEndBefore(i)},dt._getRangeAndRemoveBookmark=function(e){var t=this._root,n=t.querySelector("#squire-selection-start"),i=t.querySelector("#"+Ct);if(n&&i){var o=n.parentNode,r=i.parentNode,s=z.call(o.childNodes,n),a=z.call(r.childNodes,i);o===r&&(a-=1),ue(n),ue(i),e||(e=this._doc.createRange()),e.setStart(o,s),e.setEnd(r,a),_e(o,e),o!==r&&_e(r,e),e.collapsed&&(o=e.startContainer).nodeType===v&&((r=o.childNodes[e.startOffset])&&r.nodeType===v||(r=o.childNodes[e.startOffset-1]),r&&r.nodeType===v&&(e.setStart(r,0),e.collapse(!0)))}return e||null},dt._keyUpDetectChange=function(e){var t=e.keyCode;e.ctrlKey||e.metaKey||e.altKey||!(t<16||t>20)||!(t<33||t>45)||this._docWasChanged()},dt._docWasChanged=function(){M&&(Y=new WeakMap),this._ignoreAllChanges||(F&&this._ignoreChange?this._ignoreChange=!1:(this._isInUndoState&&(this._isInUndoState=!1,this.fireEvent("undoStateChange",{canUndo:!0,canRedo:!1})),this.fireEvent("input")))},dt._recordUndoState=function(e,t){if(!this._isInUndoState||t){var n,i=this._undoIndex,o=this._undoStack,r=this._config.undo,s=r.documentSizeThreshold,a=r.undoLimit;t||(i+=1),i<this._undoStackLength&&(o.length=this._undoStackLength=i),e&&this._saveRangeToBookmark(e),n=this._getHTML(),s>-1&&2*n.length>s&&a>-1&&i>a&&(o.splice(0,i-a),i=a,this._undoStackLength=a),o[i]=n,this._undoIndex=i,this._undoStackLength+=1,this._isInUndoState=!0}},dt.saveUndoState=function(e){return void 0===e&&(e=this.getSelection()),this._recordUndoState(e,this._isInUndoState),this._getRangeAndRemoveBookmark(e),this},dt.undo=function(){if(0!==this._undoIndex||!this._isInUndoState){this._recordUndoState(this.getSelection(),!1),this._undoIndex-=1,this._setHTML(this._undoStack[this._undoIndex]);var e=this._getRangeAndRemoveBookmark();e&&this.setSelection(e),this._isInUndoState=!0,this.fireEvent("undoStateChange",{canUndo:0!==this._undoIndex,canRedo:!0}),this.fireEvent("input")}return this},dt.redo=function(){var e=this._undoIndex,t=this._undoStackLength;if(e+1<t&&this._isInUndoState){this._undoIndex+=1,this._setHTML(this._undoStack[this._undoIndex]);var n=this._getRangeAndRemoveBookmark();n&&this.setSelection(n),this.fireEvent("undoStateChange",{canUndo:!0,canRedo:e+2<t}),this.fireEvent("input")}return this},dt.hasFormat=function(e,t,n){if(e=e.toUpperCase(),t||(t={}),!n&&!(n=this.getSelection()))return!1;!n.collapsed&&n.startContainer.nodeType===v&&n.startOffset===n.startContainer.length&&n.startContainer.nextSibling&&n.setStartBefore(n.startContainer.nextSibling),!n.collapsed&&n.endContainer.nodeType===v&&0===n.endOffset&&n.endContainer.previousSibling&&n.setEndAfter(n.endContainer.previousSibling);var i,o,r=this._root,s=n.commonAncestorContainer;if(ce(s,r,e,t))return!0;if(s.nodeType===v)return!1;i=new q(s,4,(function(e){return Le(n,e,!0)}));for(var a=!1;o=i.nextNode();){if(!ce(o,r,e,t))return!1;a=!0}return a},dt.getFontInfo=function(e){var t,n,i,o={color:void 0,backgroundColor:void 0,family:void 0,size:void 0},r=0;if(!e&&!(e=this.getSelection()))return o;if(t=e.commonAncestorContainer,e.collapsed||t.nodeType===v)for(t.nodeType===v&&(t=t.parentNode);r<4&&t;)(n=t.style)&&(!o.color&&(i=n.color)&&(o.color=i,r+=1),!o.backgroundColor&&(i=n.backgroundColor)&&(o.backgroundColor=i,r+=1),!o.family&&(i=n.fontFamily)&&(o.family=i,r+=1),!o.size&&(i=n.fontSize)&&(o.size=i,r+=1)),t=t.parentNode;return o},dt._addFormat=function(e,t,n){var i,o,r,s,a,l,c,d,h=this._root;if(n.collapsed){for(i=ge(this.createElement(e,t),h),Te(n,i),n.setStart(i.firstChild,i.firstChild.length),n.collapse(!0),d=i;ee(d);)d=d.parentNode;vt(d,i)}else{if(o=new q(n.commonAncestorContainer,4|S,(function(e){return(e.nodeType===v||"BR"===e.nodeName||"IMG"===e.nodeName)&&Le(n,e,!0)})),r=n.startContainer,a=n.startOffset,s=n.endContainer,l=n.endOffset,o.currentNode=r,o.filter(r)||(r=o.nextNode(),a=0),!r)return n;do{!ce(c=o.currentNode,h,e,t)&&(c===s&&c.length>l&&c.splitText(l),c===r&&a&&(c=c.splitText(a),s===r&&(s=c,l-=a),r=c,a=0),fe(c,i=this.createElement(e,t)),i.appendChild(c))}while(o.nextNode());s.nodeType!==v&&(c.nodeType===v?(s=c,l=c.length):(s=c.parentNode,l=1)),n=this.createRange(r,a,s,l)}return n},dt._removeFormat=function(e,t,n,i){this._saveRangeToBookmark(n);var o,r=this._doc;n.collapsed&&(U?(o=r.createTextNode(N),this._didAddZWS()):o=r.createTextNode(""),Te(n,o));for(var s=n.commonAncestorContainer;ee(s);)s=s.parentNode;var a=n.startContainer,l=n.startOffset,c=n.endContainer,d=n.endOffset,h=[],u=Array.prototype.filter.call(s.getElementsByTagName(e),(function(i){return Le(n,i,!0)&&le(i,e,t)}));return i||u.forEach((function(e){!function e(t,i){if(!Le(n,t,!1)){var o,r,s=t.nodeType===v;if(Le(n,t,!0))if(s)t===c&&d!==t.length&&h.push([i,t.splitText(d)]),t===a&&l&&(t.splitText(l),h.push([i,t]));else for(o=t.firstChild;o;o=r)r=o.nextSibling,e(o,i);else"INPUT"===t.nodeName||s&&!t.data||h.push([i,t])}}(e,e)})),h.forEach((function(e){var t=e[0].cloneNode(!1),n=e[1];fe(n,t),t.appendChild(n)})),u.forEach((function(e){fe(e,pe(e))})),this._getRangeAndRemoveBookmark(n),o&&n.collapse(!1),_e(s,n),n},dt.changeFormat=function(e,t,n,i){return n||(n=this.getSelection())?(this.saveUndoState(n),t&&(n=this._removeFormat(t.tag.toUpperCase(),t.attributes||{},n,i)),e&&(n=this._addFormat(e.tag.toUpperCase(),e.attributes||{},n)),this.setSelection(n),this._updatePath(n,!0),F||this._docWasChanged(),this):this};var _t={DT:"DD",DD:"DT",LI:"LI",PRE:"PRE"},St=function(e,t,n,i){var o=_t[t.nodeName],r=null,s=Ce(n,i,t.parentNode,e._root),a=e._config;return o||(o=a.blockTag,r=a.blockAttributes),le(s,o,r)||(t=me(s.ownerDocument,o,r),s.dir&&(t.dir=s.dir),fe(s,t),t.appendChild(pe(s)),s=t),s};dt.forEachBlock=function(e,t,n){if(!n&&!(n=this.getSelection()))return this;t&&this.saveUndoState(n);var i=this._root,o=Ae(n,i),r=Re(n,i);if(o&&r)do{if(e(o)||o===r)break}while(o=re(o,i));return t&&(this.setSelection(n),this._updatePath(n,!0),F||this._docWasChanged()),this},dt.modifyBlocks=function(e,t){if(!t&&!(t=this.getSelection()))return this;this._recordUndoState(t,this._isInUndoState);var n,i=this._root;return Ue(t,i),Be(t,i,i,i),n=ke(t,i,i),Te(t,e.call(this,n)),t.endOffset<t.endContainer.childNodes.length&&Ne(t.endContainer.childNodes[t.endOffset],i),Ne(t.startContainer.childNodes[t.startOffset],i),this._getRangeAndRemoveBookmark(t),this.setSelection(t),this._updatePath(t,!0),F||this._docWasChanged(),this};var Nt=function(e){var t=this._root,n=e.querySelectorAll("blockquote");return Array.prototype.filter.call(n,(function(e){return!ce(e.parentNode,t,"BLOCKQUOTE")})).forEach((function(e){fe(e,pe(e))})),e},yt=function(){return this.createDefaultBlock([this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),this.createElement("INPUT",{id:Ct,type:"hidden"})])},bt=function(e,t,n){for(var i,o,r,s,a=ie(t,e._root),l=e._config.tagAttributes,c=l[n.toLowerCase()],d=l.li;i=a.nextNode();)"LI"===i.parentNode.nodeName&&(i=i.parentNode,a.currentNode=i.lastChild),"LI"!==i.nodeName?(s=e.createElement("LI",d),i.dir&&(s.dir=i.dir),(r=i.previousSibling)&&r.nodeName===n?(r.appendChild(s),ue(i)):fe(i,e.createElement(n,c,[s])),s.appendChild(pe(i)),a.currentNode=s):(o=(i=i.parentNode).nodeName)!==n&&/^[OU]L$/.test(o)&&fe(i,e.createElement(n,c,[pe(i)]))},Tt=function(e,t){for(var n=e.commonAncestorContainer,i=e.startContainer,o=e.endContainer;n&&n!==t&&!/^[OU]L$/.test(n.nodeName);)n=n.parentNode;if(!n||n===t)return null;for(i===n&&(i=i.childNodes[e.startOffset]),o===n&&(o=o.childNodes[e.endOffset]);i&&i.parentNode!==n;)i=i.parentNode;for(;o&&o.parentNode!==n;)o=o.parentNode;return[n,i,o]};dt.increaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=Tt(e,t);if(!n)return this.focus();var i=n[0],o=n[1],r=n[2];if(!o||o===i.firstChild)return this.focus();this._recordUndoState(e,this._isInUndoState);var s,a,l=i.nodeName,c=o.previousSibling;c.nodeName!==l&&(s=this._config.tagAttributes[l.toLowerCase()],c=this.createElement(l,s),i.insertBefore(c,o));do{a=o===r?null:o.nextSibling,c.appendChild(o)}while(o=a);return(a=c.nextSibling)&&Ne(a,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),F||this._docWasChanged(),this.focus()},dt.decreaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=Tt(e,t);if(!n)return this.focus();var i,o,r,s,a=n[0],l=n[1],c=n[2];if(l||(l=a.firstChild),c||(c=a.lastChild),this._recordUndoState(e,this._isInUndoState),l){if(i=a.parentNode,r=c.nextSibling?Ce(a,c.nextSibling,i,t):a.nextSibling,i!==t&&"LI"===i.nodeName){for(i=i.parentNode;r;)o=r.nextSibling,c.appendChild(r),r=o;r=a.parentNode.nextSibling}s=!/^[OU]L$/.test(i.nodeName);do{o=l===c?null:l.nextSibling,a.removeChild(l),s&&"LI"===l.nodeName&&(l=this.createDefaultBlock([pe(l)])),i.insertBefore(l,r)}while(l=o)}return a.firstChild||ue(a),r&&Ne(r,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),F||this._docWasChanged(),this.focus()},dt._ensureBottomLine=function(){var e=this._root,t=e.lastElementChild;t&&t.nodeName===this._config.blockTag&&te(t)||e.appendChild(this.createDefaultBlock())},dt.setKeyHandler=function(e,t){return this._keyHandlers[e]=t,this},dt._getHTML=function(){return this._root.innerHTML},dt._setHTML=function(e){var t=this._root,n=t;n.innerHTML=e;do{ge(n,t)}while(n=re(n,t));this._ignoreChange=!0},dt.getHTML=function(e){var t,n,i,o,r,s,a=[];if(e&&(s=this.getSelection())&&this._saveRangeToBookmark(s),P)for(n=t=this._root;n=re(n,t);)n.textContent||n.querySelector("BR")||(i=this.createElement("BR"),n.appendChild(i),a.push(i));if(o=this._getHTML().replace(/\u200B/g,""),P)for(r=a.length;r--;)ue(a[r]);return s&&this._getRangeAndRemoveBookmark(s),o},dt.setHTML=function(e){var t,n,i,o=this._config,r=o.isSetHTMLSanitized?o.sanitizeToDOMFragment:null,s=this._root;"function"==typeof r?n=r(e,!1,this):((t=this.createElement("DIV")).innerHTML=e,(n=this._doc.createDocumentFragment()).appendChild(pe(t))),Ye(n,o),tt(n,s,!1),ve(n,s);for(var a=n;a=re(a,s);)ge(a,s);for(this._ignoreChange=!0;i=s.lastChild;)s.removeChild(i);s.appendChild(n),ge(s,s),this._undoIndex=-1,this._undoStack.length=0,this._undoStackLength=0,this._isInUndoState=!1;var l=this._getRangeAndRemoveBookmark()||this.createRange(s.firstChild,0);return this.saveUndoState(l),this._lastSelection=l,pt.call(this),this._updatePath(l,!0),this},dt.insertElement=function(e,t){if(t||(t=this.getSelection()),t.collapse(!0),ee(e))Te(t,e),t.setStartAfter(e);else{for(var n,i=this._root,o=Ae(t,i)||i;o!==i&&!o.nextSibling;)o=o.parentNode;o!==i&&(n=Ce(o.parentNode,o.nextSibling,i,i)),n?i.insertBefore(e,n):(i.appendChild(e),n=this.createDefaultBlock(),i.appendChild(n)),t.setStart(n,0),t.setEnd(n,0),Oe(t)}return this.focus(),this.setSelection(t),this._updatePath(t),F||this._docWasChanged(),this},dt.insertImage=function(e,t){var n=this.createElement("IMG",lt({src:e},t,!0));return this.insertElement(n),n},dt.linkRegExp=/\b(?:((?:(?:ht|f)tps?:\/\/|www\d{0,3}[.]|[a-z0-9][a-z0-9.\-]*[.][a-z]{2,}\/)(?:[^\s()<>]+|\([^\s()<>]+\))+(?:[^\s?&`!()\[\]{};:'".,<>«»“”‘’]|\([^\s()<>]+\)))|([\w\-.%+]+@(?:[\w\-]+\.)+[a-z]{2,}\b(?:[?][^&?\s]+=[^\s?&`!()\[\]{};:'".,<>«»“”‘’]+(?:&[^&?\s]+=[^\s?&`!()\[\]{};:'".,<>«»“”‘’]+)*)?))/i;var kt=function(e,t,n){var i,o,r,s,a,l,c,d=e.ownerDocument,h=new q(e,4,(function(e){return!ce(e,t,"A")})),u=n.linkRegExp,f=n._config.tagAttributes.a;if(u)for(;i=h.nextNode();)for(o=i.data,r=i.parentNode;s=u.exec(o);)l=(a=s.index)+s[0].length,a&&(c=d.createTextNode(o.slice(0,a)),r.insertBefore(c,i)),(c=n.createElement("A",lt({href:s[1]?/^(?:ht|f)tps?:/i.test(s[1])?s[1]:"http://"+s[1]:"mailto:"+s[0]},f,!1))).textContent=o.slice(a,l),r.insertBefore(c,i),i.data=o=o.slice(l)};dt.insertHTML=function(e,t){var n,i,o,r,s,a,l,c=this._config,d=c.isInsertedHTMLSanitized?c.sanitizeToDOMFragment:null,h=this.getSelection(),u=this._doc;"function"==typeof d?r=d(e,t,this):(t&&(n=e.indexOf("\x3c!--StartFragment--\x3e"),i=e.lastIndexOf("\x3c!--EndFragment--\x3e"),n>-1&&i>-1&&(e=e.slice(n+20,i))),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(e)&&(e="<TR>"+e+"</TR>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(e)&&(e="<TABLE>"+e+"</TABLE>"),(o=this.createElement("DIV")).innerHTML=e,(r=u.createDocumentFragment()).appendChild(pe(o))),this.saveUndoState(h);try{for(s=this._root,a=r,l={fragment:r,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},kt(r,r,this),Ye(r,c),tt(r,s,!1),Xe(r),r.normalize();a=re(a,r);)ge(a,s);t&&this.fireEvent("willPaste",l),l.defaultPrevented||(xe(h,l.fragment,s),F||this._docWasChanged(),h.collapse(!1),this._ensureBottomLine()),this.setSelection(h),this._updatePath(h,!0),t&&this.focus()}catch(e){this.didError(e)}return this};var Et=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")};dt.insertPlainText=function(e,t){var n=this.getSelection();if(n.collapsed&&ce(n.startContainer,this._root,"PRE")){var i,o,r=n.startContainer,s=n.startOffset;return r&&r.nodeType===v||(i=this._doc.createTextNode(""),r.insertBefore(i,r.childNodes[s]),r=i,s=0),o={text:e,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},t&&this.fireEvent("willPaste",o),o.defaultPrevented||(e=o.text,r.insertData(s,e),n.setStart(r,s+e.length),n.collapse(!0)),this.setSelection(n),this}var a,l,c,d,h=e.split("\n"),u=this._config,f=u.blockTag,p=u.blockAttributes,m="</"+f+">",g="<"+f;for(a in p)g+=" "+a+'="'+Et(p[a])+'"';for(g+=">",l=0,c=h.length;l<c;l+=1)d=h[l],d=Et(d).replace(/ (?= )/g,"&nbsp;"),h[l]=g+(d||"<BR>")+m;return this.insertHTML(h.join(""),t)};var xt=function(e,t,n){return function(){return this[e](t,n),this.focus()}};dt.addStyles=function(e){if(e){var t=this._doc.documentElement.firstChild,n=this.createElement("STYLE",{type:"text/css"});n.appendChild(this._doc.createTextNode(e)),t.appendChild(n)}return this},dt.bold=xt("changeFormat",{tag:"B"}),dt.italic=xt("changeFormat",{tag:"I"}),dt.underline=xt("changeFormat",{tag:"U"}),dt.strikethrough=xt("changeFormat",{tag:"S"}),dt.subscript=xt("changeFormat",{tag:"SUB"},{tag:"SUP"}),dt.superscript=xt("changeFormat",{tag:"SUP"},{tag:"SUB"}),dt.removeBold=xt("changeFormat",null,{tag:"B"}),dt.removeItalic=xt("changeFormat",null,{tag:"I"}),dt.removeUnderline=xt("changeFormat",null,{tag:"U"}),dt.removeStrikethrough=xt("changeFormat",null,{tag:"S"}),dt.removeSubscript=xt("changeFormat",null,{tag:"SUB"}),dt.removeSuperscript=xt("changeFormat",null,{tag:"SUP"}),dt.makeLink=function(e,t){var n=this.getSelection();if(n.collapsed){var i=e.indexOf(":")+1;if(i)for(;"/"===e[i];)i+=1;Te(n,this._doc.createTextNode(e.slice(i)))}return t=lt(lt({href:e},t,!0),this._config.tagAttributes.a,!1),this.changeFormat({tag:"A",attributes:t},{tag:"A"},n),this.focus()},dt.removeLink=function(){return this.changeFormat(null,{tag:"A"},this.getSelection(),!0),this.focus()},dt.setFontFace=function(e){var t=this._config.classNames.fontFamily;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"font-family: "+e+", sans-serif;"}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},dt.setFontSize=function(e){var t=this._config.classNames.fontSize;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"font-size: "+("number"==typeof e?e+"px":e)}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},dt.setTextColour=function(e){var t=this._config.classNames.colour;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"color:"+e}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},dt.setHighlightColour=function(e){var t=this._config.classNames.highlight;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"background-color:"+e}}:e,{tag:"SPAN",attributes:{class:t}}),this.focus()},dt.setTextAlignment=function(e){return this.forEachBlock((function(t){var n=t.className.split(/\s+/).filter((function(e){return!!e&&!/^align/.test(e)})).join(" ");e?(t.className=n+" align-"+e,t.style.textAlign=e):(t.className=n,t.style.textAlign="")}),!0),this.focus()},dt.setTextDirection=function(e){return this.forEachBlock((function(t){e?t.dir=e:t.removeAttribute("dir")}),!0),this.focus()};var Lt=function(e){for(var t,n=this._root,i=this._doc,o=i.createDocumentFragment(),r=ie(e,n);t=r.nextNode();){var s,a,l=t.querySelectorAll("BR"),c=[],d=l.length;for(s=0;s<d;s+=1)c[s]=et(l[s],!1);for(;d--;)a=l[d],c[d]?fe(a,i.createTextNode("\n")):ue(a);for(d=(l=t.querySelectorAll("CODE")).length;d--;)ue(l[d]);o.childNodes.length&&o.appendChild(i.createTextNode("\n")),o.appendChild(pe(t))}for(r=new q(o,4);t=r.nextNode();)t.data=t.data.replace(/ /g," ");return o.normalize(),ge(this.createElement("PRE",this._config.tagAttributes.pre,[o]),n)},Ot=function(e){for(var t,n,i,o,r,s,a=this._doc,l=this._root,c=e.querySelectorAll("PRE"),d=c.length;d--;){for(n=new q(t=c[d],4);i=n.nextNode();){for(o=(o=i.data).replace(/ (?= )/g," "),r=a.createDocumentFragment();(s=o.indexOf("\n"))>-1;)r.appendChild(a.createTextNode(o.slice(0,s))),r.appendChild(a.createElement("BR")),o=o.slice(s+1);i.parentNode.insertBefore(r,i),i.data=o}ve(t,l),fe(t,pe(t))}return e};dt.code=function(){var e=this.getSelection();return e.collapsed||ne(e.commonAncestorContainer)?this.modifyBlocks(Lt,e):this.changeFormat({tag:"CODE",attributes:this._config.tagAttributes.code},null,e),this.focus()},dt.removeCode=function(){var e=this.getSelection();return ce(e.commonAncestorContainer,this._root,"PRE")?this.modifyBlocks(Ot,e):this.changeFormat(null,{tag:"CODE"},e),this.focus()},dt.toggleCode=function(){return this.hasFormat("PRE")||this.hasFormat("CODE")?this.removeCode():this.code(),this},dt.removeAllFormatting=function(e){if(!e&&!(e=this.getSelection())||e.collapsed)return this;for(var t=this._root,n=e.commonAncestorContainer;n&&!te(n);)n=n.parentNode;if(n||(Ue(e,t),n=t),n.nodeType===v)return this;this.saveUndoState(e),Be(e,n,n,t);for(var i,o,r=n.ownerDocument,s=e.startContainer,a=e.startOffset,l=e.endContainer,c=e.endOffset,d=r.createDocumentFragment(),h=r.createDocumentFragment(),u=Ce(l,c,n,t),f=Ce(s,a,n,t);f!==u;)i=f.nextSibling,d.appendChild(f),f=i;return function e(t,n,i){var o,r;for(o=n.firstChild;o;o=r){if(r=o.nextSibling,ee(o)){if(o.nodeType===v||"BR"===o.nodeName||"IMG"===o.nodeName){i.appendChild(o);continue}}else if(te(o)){i.appendChild(t.createDefaultBlock([e(t,o,t._doc.createDocumentFragment())]));continue}e(t,o,i)}return i}(this,d,h),h.normalize(),f=h.firstChild,i=h.lastChild,o=n.childNodes,f?(n.insertBefore(h,u),a=z.call(o,f),c=z.call(o,i)+1):c=a=z.call(o,u),e.setStart(n,a),e.setEnd(n,c),_e(n,e),Oe(e),this.setSelection(e),this._updatePath(e,!0),this.focus()},dt.increaseQuoteLevel=xt("modifyBlocks",(function(e){return this.createElement("BLOCKQUOTE",this._config.tagAttributes.blockquote,[e])})),dt.decreaseQuoteLevel=xt("modifyBlocks",Nt),dt.makeUnorderedList=xt("modifyBlocks",(function(e){return bt(this,e,"UL"),e})),dt.makeOrderedList=xt("modifyBlocks",(function(e){return bt(this,e,"OL"),e})),dt.removeList=xt("modifyBlocks",(function(e){var t,n,i,o,r,s=e.querySelectorAll("UL, OL"),a=e.querySelectorAll("LI"),l=this._root;for(t=0,n=s.length;t<n;t+=1)ve(o=pe(i=s[t]),l),fe(i,o);for(t=0,n=a.length;t<n;t+=1)te(r=a[t])?fe(r,this.createDefaultBlock([pe(r)])):(ve(r,l),fe(r,pe(r)));return e})),ct.isInline=ee,ct.isBlock=te,ct.isContainer=ne,ct.getBlockWalker=ie,ct.getPreviousBlock=oe,ct.getNextBlock=re,ct.areAlike=ae,ct.hasTagAttributes=le,ct.getNearest=ce,ct.isOrContains=de,ct.detach=ue,ct.replaceWith=fe,ct.empty=pe,ct.getNodeBefore=ye,ct.getNodeAfter=be,ct.insertNodeInRange=Te,ct.extractContentsOfRange=ke,ct.deleteContentsOfRange=Ee,ct.insertTreeFragmentIntoRange=xe,ct.isNodeContainedInRange=Le,ct.moveRangeBoundariesDownTree=Oe,ct.moveRangeBoundariesUpTree=Be,ct.getStartBlockOfRange=Ae,ct.getEndBlockOfRange=Re,ct.contentWalker=De,ct.rangeDoesStartAtBlockBoundary=we,ct.rangeDoesEndAtBlockBoundary=Pe,ct.expandRangeToBlockBoundaries=Ue,ct.onPaste=st,ct.addLinks=kt,ct.splitBlock=St,ct.startSelectionId="squire-selection-start",ct.endSelectionId=Ct;var Bt=ct,At=["input","focus","blur"];Bt.prototype.makeHeader=function(e){return this.modifyBlocks((function(t){for(var n=this._doc.createDocumentFragment(),i=t;i=Bt.getNextBlock(i);)n.appendChild(this.createElement(e,[Bt.empty(i)]));return n}))},Bt.prototype.testPresenceinSelection=function(e,t,n,i){var o=this.getPath();console.log(234134214);var r=i.test(o)|this.hasFormat(n);return!(e!=t||!r)};var Rt,Dt={props:{value:{type:String,default:""},multiple:{type:Boolean,default:!1},insetImage:{type:Function}},data:function(){return{dataValue:this.value,html:"",icons:[{}]}},watch:{value:function(e){e!==this.dataValue&&(this.dataValue=e,this.editor.setHTML(this.value))}},mounted:function(){var e=this,t=this.$refs.editor;this.editor=new Bt(t),this.editor.setHTML(this.value),At.forEach((function(t){e.editor.addEventListener(t,(function(){var n=e.editor.getHTML();e.dataValue=n,e.$emit(t,n)}))}))},beforeDestroy:function(){this.editor&&(this.editor.destroy(),this.editor=null)},methods:{insetImg:(Rt=Object(m.a)(regeneratorRuntime.mark((function e(){var t,n,i,o,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.insetImage){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.insetImage();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:t=e.t0,n=Object(p.a)(t,2),i=n[0],o=void 0===i?"":i,r=n[1],s=void 0===r?{}:r,o&&this.editor.insertImage(o,s);case 14:case"end":return e.stop()}}),e,this)}))),function(){return Rt.apply(this,arguments)}),change:function(){var e=this.editor.getHTML();this.dataValue=e,this.$emit("input",e)},clear:function(){this.editor.setHTML(""),this.change()},copy:function(){d(this.editor.getHTML()),alert("复制HTML成功")},changePreview:function(){this.html=this.html?"":this.editor.getHTML()},edit:function(e,t){this.editor&&(this.editor[e](t),this.editor.focus())},makeHeader:function(e){this.editor&&this.editor.makeHeader(e)},testEdit:function(e){var t=this.editor;if(t){var n={testBold:t.testPresenceinSelection("bold",e,"B",/>B\b/),testItalic:t.testPresenceinSelection("italic",e,"I",/>I\b/),testUnderline:t.testPresenceinSelection("underline",e,"U",/>U\b/),testUnorderedList:t.testPresenceinSelection("makeUnorderedList",e,"UL",/>UL\b/)};n.testBold|n.testItalic|n.testUnderline|n.testUnorderedList?(n.testBold&&t.removeBold(),n.testItalic&&t.removeItalic(),n.testUnderline&&t.removeUnderline(),n.testLink&&t.removeLink(),n.testUnorderedList&&t.removeList(),console.log(n.makeUnorderedList)):this.edit(e)}}}},wt=(n(609),{components:{MdEditor:f,RichEditor:Object(u.a)(Dt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rich-outer"},[n("div",{staticClass:"rich-action"},[n("div",[n("span",{staticClass:"icon-h1 iconfont",on:{click:function(t){return e.makeHeader("h1")}}}),e._v(" "),n("span",{staticClass:"icon-h2 iconfont",on:{click:function(t){return e.makeHeader("h2")}}}),e._v(" "),n("span",{staticClass:"icon-h3 iconfont",on:{click:function(t){return e.makeHeader("h3")}}}),e._v(" "),n("span",{staticClass:"icon-bold iconfont",on:{click:function(t){return e.testEdit("bold")}}}),e._v(" "),n("span",{staticClass:"icon-italic iconfont",on:{click:function(t){return e.testEdit("italic")}}}),e._v(" "),n("span",{staticClass:"icon-underline iconfont",on:{click:function(t){return e.testEdit("underline")}}}),e._v(" "),n("span",{staticClass:"icon-align-left iconfont",on:{click:function(t){return e.edit("setTextAlignment","left")}}}),e._v(" "),n("span",{staticClass:"icon-align-center iconfont",on:{click:function(t){return e.edit("setTextAlignment","center")}}}),e._v(" "),n("span",{staticClass:"icon-align-right iconfont",on:{click:function(t){return e.edit("setTextAlignment","right")}}}),e._v(" "),n("span",{staticClass:"icon-wuxuliebiao iconfont",on:{click:function(t){return e.testEdit("makeUnorderedList")}}}),e._v(" "),e.insetImage?n("span",{staticClass:"balloon",attrs:{"data-balloon":"上传图片"},on:{click:e.insetImg}},[n("i",{staticClass:"icon-file-image iconfont"})]):e._e(),e._v(" "),n("span",{staticClass:"icon-undo iconfont",staticStyle:{"padding-left":"10px"},on:{click:function(t){return e.edit("undo")}}}),e._v(" "),n("span",{staticClass:"icon-redo iconfont",on:{click:function(t){return e.edit("redo")}}}),e._v(" "),n("span",{staticClass:"balloon",staticStyle:{"padding-left":"10px"},attrs:{"data-balloon":"清空内容"},on:{click:e.clear}},[n("i",{staticClass:"icon-clear iconfont"})]),e._v(" "),n("span",{staticClass:"balloon",staticStyle:{"padding-left":"10px"},attrs:{"data-balloon":"切换预览"},on:{click:e.changePreview}},[n("i",{staticClass:"icon-eye iconfont"})]),e._v(" "),n("span",{staticClass:"balloon",attrs:{"data-balloon":"复制html"},on:{click:e.copy}},[n("i",{staticClass:"icon-file-copy iconfont"})])]),e._v(" "),e.multiple?n("div",[n("span",{staticClass:"balloon",attrs:{"data-balloon":"切换编辑器"}},[n("i",{staticClass:"icon-file-markdown iconfont",on:{click:function(t){return e.$emit("update:type","markdown")}}})])]):e._e()]),e._v(" "),n("div",{staticClass:"editor-outer"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.html,expression:"!html"}],ref:"editor",staticClass:"rich-editor"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.html,expression:"html"}],staticClass:"rich-editor"},[e._v(e._s(e.html))])])])}),[],!1,null,"0812b7b4",null).exports},props:{type:{type:String,default:"markdown"},multiple:{type:Boolean,default:!1}},data:function(){return{t:this.type}}}),Pt=Object(u.a)(wt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-outer"},["markdown"===e.t?n("md-editor",e._g(e._b({attrs:{type:e.t,multiple:e.multiple},on:{"update:type":function(t){e.t=t}}},"md-editor",e.$attrs,!1),e.$listeners)):n("rich-editor",e._g(e._b({attrs:{type:e.t,multiple:e.multiple},on:{"update:type":function(t){e.t=t}}},"rich-editor",e.$attrs,!1),e.$listeners))],1)}),[],!1,null,null,null).exports;Pt.install=function(e){e.component("vue-editor",Pt)};var Ut={components:{VueEditor:Pt},data:function(){return{text:""}},mounted:function(){var e=this;setTimeout((function(){e.text="### curl基本使用\n- curl: 发送get请求\n```bash\ncurl https://www.example.com\n```\n\n- -A/H: 指定 User-Agent\n```bash\ncurl -A 'Mozilla/5.0 ' https://test.com\n```\n\n- -b: 发送cookie\n```bash\n curl -b 'foo=bar' https://test.com\n```\n\n- -c: 保存服务器设置cookie到文件\n```bash\ncurl -c cookie.txt https://test.com\n```\n\n- -d: 发送post请求的数据体(后可以跟文件)\n```bash\n# header会自动Content-Type : application/x-www-form-urlencoded\ncul -d 'username=aa&password=bb' -X post https://test.com\n```\n- -e: 设置头部Referer, 请求来源\n```bash\ncurl -e 'https://test.com' https://test.com\n```\n\n- -F: 发送二进制文件\n```bash\ncurl -F 'file=**.psd' https://test.com \n```\n\n- -G: URL上的params\n```bash\ncurl -G -d 'a=1' -d 'b=2' https://test.com\n```\n- -i: 打印服务端回应HTTP头\n```bash\ncurl -i https://test.com\n```\n- -I: 向服务器发出 HEAD 请求，然会将服务器返回的 HTTP 标头打印出来\n```bash\ncurl -I https://test.com\n```\n\n- -k: 跳过SSL检测\n```bash\ncurl -k https://test.com\n```\n\n- -L: 跟随重定向\n```bash\ncurl -L https://test.com\n```\n\n- ---limit-rate: 限制带宽\n```bash\ncurl --limit-rate 10k https://test.com\n```\n\n- -o: 保存服务器回应的文件\n```bash\ncurl -o test.txt https://test.com\n```\n\n- -O: 保存服务器文件，使用最后斜线后作为名字\n```bash\ncurl -O https://test.com\n```\n\n- -s: 不输出错误信息\n\n- -u: 用户密码认证\n```bash\ncurl -u 'username:aaa' https://test.com\n```\n\n- -v: 输出通信的过程\n```bash\ncurl -v https://test.com\n```\n\n- -x: 指定http代理\n```bash\ncurl -x proxy.com https://test.com\n```\n\n- -X: 指定请求方法\n```bash\ncurl -X post https://test.com\n```\n\n\n"}),1e3)},methods:{insetImage:function(){return new Promise((function(e){setTimeout((function(){e(["http://pic.kuan1.top/2eb148653cc2130accb78e714999931d.png",{style:"width: 250px;margin: 20px"}])}))}))}}},It=(n(610),Object(u.a)(Ut,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"test-container"},[n("h2",{staticClass:"title"},[e._v("富文本编辑器")]),e._v(" "),n("vue-editor",{staticClass:"editor-content",attrs:{type:"word","inset-image":e.insetImage},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),n("h2",{staticClass:"title"},[e._v("markdown编辑器")]),e._v(" "),n("vue-editor",{staticClass:"editor-content",attrs:{type:"markdown"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)}),[],!1,null,null,null));t.default=It.exports}}]);